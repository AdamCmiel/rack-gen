#!/usr/bin/env ruby

root = File.dirname(__FILE__)

if ARGV[0] == "new"
	directory = ARGV[1]
	if system "mkdir -p #{directory}/public"
    system "cp #{root}/../lib/config.ru #{directory}/config.ru"
    system "cp #{root}/../lib/index.html #{directory}/index.html"
    system "cp #{root}/../lib/Gemfile #{directory}/Gemfile"
	  system "cd #{directory} && git init && bundle install"
    system "cd #{directory} && git add . && git commit -m 'add most basic rack app'"
    system "cd #{directory} && heroku create && git push heroku master && heroku open"
	else
		puts "A directory called #{directory} already exists."
	end 
end 